<script>
  function searchRoute() {
    const start = document.getElementById('start').value;
    const end = document.getElementById('end').value;

    document.getElementById('corrected').innerText = "⏳ 경로를 계산 중입니다...";

    fetch('/route', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ start, end })
    })
    .then(response => {
      if (!response.ok) {
        throw new Error("서버 응답 실패");
      }
      const contentType = response.headers.get("content-type");
      if (!contentType || !contentType.includes("application/json")) {
        throw new TypeError("JSON 형식의 응답이 아닙니다");
      }
      return response.json();
    })
    .then(data => {
      if (data.error) {
        alert(data.error);
        return;
      }

      // 지도에 경로 표시하는 로직 구현
    })
    .catch(error => {
      alert(`❌ 예외 발생: ${error.message}`);
      console.error("Error:", error);
    });
  }
</script>
